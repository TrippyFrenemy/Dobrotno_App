{% extends "base.html" %}
{% block title %}Изменить запись{% endblock %}
{% block content %}
<div class="max-w-lg mx-auto bg-white p-6 rounded shadow">
  <h2 class="text-xl font-semibold mb-4">Изменить запись</h2>
  <form method="post" class="flex flex-col gap-4">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

    <!-- Дата (только для просмотра) -->
    <input type="date" name="date_" value="{{ record.date }}" required class="border p-2 rounded" readonly />

    <!-- Поля ввода сумм -->
    <input type="number" step="0.01" name="cash" value="{{ record.cash }}" required class="border p-2 rounded" />
    <input type="number" step="0.01" name="terminal" value="{{ record.terminal }}" required class="border p-2 rounded" />

    <!-- Сотрудники магазина -->
    <label>Сотрудники магазина</label>
    <select name="store_employees" multiple required class="border p-2 rounded h-40">
      {% for emp in store_employees %}
      <option value="{{ emp.id }}" {% if emp.id in selected_store %}selected{% endif %}>{{ emp.name | e }}</option>
      {% endfor %}
    </select>

    <!-- Сотрудники склада -->
    <label>Сотрудники склада</label>
    <select name="warehouse_employees" multiple required class="border p-2 rounded h-40">
      <option value="">---</option>
      {% for emp in warehouse_employees %}
      <option value="{{ emp.id }}" {% if emp.id in selected_warehouse %}selected{% endif %}>{{ emp.name | e }}</option>
      {% endfor %}
    </select>

    <button type="submit" class="bg-green-600 text-white py-2 rounded hover:bg-green-700">Сохранить</button>
  </form>
</div>
{% endblock %}
