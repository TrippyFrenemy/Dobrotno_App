{% extends "base.html" %}

{% block title %}Редактировать пользователя{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto bg-white p-6 rounded shadow">
  <h2 class="text-xl font-semibold mb-4">Редактировать {{ user.name | e }}</h2>
  <form method="post" class="flex flex-col gap-4">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <input type="text" name="name" value="{{ user.name }}" required class="border p-2 rounded" />
    <input type="text" name="email" value="{{ user.email }}" required class="border p-2 rounded" />
    <select name="role" class="border p-2 rounded">
      <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Администратор (Не ставить не Аврущенко)</option>
      <option value="manager" {% if user.role == 'manager' %}selected{% endif %}>Менеджер</option>
      <option value="coffee" {% if user.role == 'coffee' %}selected{% endif %}>Бариста</option>
      <option value="employee" {% if user.role == 'employee' %}selected{% endif %}>Сотрудник</option>
      <option value="store_worker" {% if user.role == 'store_worker' %}selected{% endif %}>Сотрудник Магазина</option>
      <option value="warehouse_worker" {% if user.role == 'warehouse_worker' %}selected{% endif %}>Сотрудник Склада</option>
    </select>
    <input type="number" name="default_rate" step="1" value="{{ user.default_rate }}" class="border p-2 rounded" placeholder="Ставка (грн)"/>
    <input type="number" name="default_percent" step="1" value="{{ user.default_percent }}" class="border p-2 rounded" placeholder="Ставка (%)"/>
    <label>Начало смены</label>
    <input type="time" name="shift_start" value="{{ user.shift_start.strftime('%H:%M') if user.shift_start else '10:00' }}" class="border p-2 rounded" />
    <label>Конец смены</label>
    <input type="time" name="shift_end" value="{{ user.shift_end.strftime('%H:%M') if user.shift_end else '20:00' }}" class="border p-2 rounded" />
    <label class="flex items-center gap-2">
      <input type="checkbox" name="is_active" value="1" {% if user.is_active %}checked{% endif %} class="h-4 w-4" />
      Активен
    </label>
    <button type="submit" class="bg-green-600 text-white py-2 rounded hover:bg-green-700">Сохранить</button>
  </form>
</div>
{% endblock %}
